<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <title>IEEE TechFest 2025 | AR Camera Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Face Detection Library -->
    <script defer src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api/dist/face-api.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-green: #00ff00;
            --dark-bg: #0a0a0a;
            --card-bg: rgba(255, 255, 255, 0.03);
            --border: rgba(0, 255, 0, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --gradient-green: linear-gradient(135deg, #00ff00, #00cc00);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            pointer-events: none;
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary-green);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
            box-shadow: 0 0 20px var(--primary-green);
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(100vw, -100vh) scale(0); opacity: 0; }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(30px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 5%;
            box-shadow: 0 8px 32px rgba(0, 255, 0, 0.1);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-green);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #000;
            font-weight: 900;
            box-shadow: 0 8px 24px rgba(0, 255, 0, 0.3);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-title {
            font-size: 22px;
            font-weight: 900;
            letter-spacing: 1px;
            background: var(--gradient-green);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .brand-subtitle {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            letter-spacing: 2px;
        }

        .nav-menu {
            display: flex;
            gap: 10px;
        }

        .nav-link {
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 700;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-green);
            transition: left 0.3s ease;
            z-index: -1;
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            left: 0;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #000;
            transform: translateY(-2px);
        }

        /* Page Container */
        .page {
            display: none;
            min-height: 100vh;
            padding-top: 80px;
            position: relative;
            z-index: 1;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HOME PAGE */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 100px 5% 80px;
            text-align: center;
            position: relative;
        }

        .hero-3d-element {
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(0, 255, 0, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(60px);
            animation: float3d 8s ease-in-out infinite;
        }

        @keyframes float3d {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            50% { transform: translate(-50%, -50%) rotate(180deg); }
        }

        .hero-title {
            font-size: clamp(48px, 8vw, 96px);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 24px;
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 50%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -2px;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(0, 255, 0, 0.5)); }
            50% { filter: drop-shadow(0 0 40px rgba(0, 255, 0, 0.8)); }
        }

        .hero-subtitle {
            font-size: clamp(16px, 3vw, 24px);
            color: var(--text-secondary);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .hero-tagline {
            font-size: clamp(14px, 2vw, 18px);
            color: rgba(255, 255, 255, 0.5);
            max-width: 600px;
            margin-bottom: 48px;
            line-height: 1.6;
        }

        .cta-button {
            padding: 20px 50px;
            background: var(--gradient-green);
            color: #000;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 40px rgba(0, 255, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .cta-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 255, 0, 0.5);
        }

        .cta-icon {
            margin-right: 10px;
        }

        /* Feature Cards */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 0 5%;
        }

        .feature-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 40px 30px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 0, 0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .feature-card:hover::before {
            opacity: 1;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary-green);
            box-shadow: 0 20px 60px rgba(0, 255, 0, 0.2);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-green);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #000;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(0, 255, 0, 0.3);
        }

        .feature-title {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .feature-value {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary-green);
        }

        /* CAMERA PAGE */
        .camera-page {
            padding: 120px 5% 100px;
        }

        .camera-wrapper {
            max-width: 700px;
            margin: 0 auto;
        }

        .camera-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 42px;
            font-weight: 900;
            background: var(--gradient-green);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
        }

        .section-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
        }

        .camera-viewport {
            position: relative;
            width: 100%;
            aspect-ratio: 9 / 16;
            background: #000;
            border-radius: 32px;
            overflow: hidden;
            border: 2px solid var(--border);
            box-shadow: 0 30px 80px rgba(0, 255, 0, 0.2);
            margin-bottom: 40px;
        }

        #canvas {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 24px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 20;
        }

        .overlay-badge {
            background: rgba(0, 255, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary-green);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 700;
            color: var(--primary-green);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--primary-green);
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Scan Lines */
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-green), transparent);
            animation: scan 3s linear infinite;
            z-index: 15;
            box-shadow: 0 0 20px var(--primary-green);
        }

        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        /* Frame Corners */
        .frame-corner {
            position: absolute;
            width: 50px;
            height: 50px;
            border: 3px solid var(--primary-green);
            z-index: 15;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        .corner-tl { top: 24px; left: 24px; border-right: none; border-bottom: none; }
        .corner-tr { top: 24px; right: 24px; border-left: none; border-bottom: none; }
        .corner-bl { bottom: 24px; left: 24px; border-right: none; border-top: none; }
        .corner-br { bottom: 24px; right: 24px; border-left: none; border-top: none; }

        /* Instructions Panel */
        .instructions {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .instructions h3 {
            font-size: 18px;
            color: var(--primary-green);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .instructions ol {
            color: var(--text-secondary);
            font-size: 15px;
            line-height: 2;
            padding-left: 24px;
        }

        /* Filter Grid */
        .filter-section {
            margin-bottom: 40px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        .filter-btn {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 24px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .filter-btn:hover::before {
            width: 200%;
            height: 200%;
        }

        .filter-btn:hover {
            transform: translateY(-4px);
            border-color: var(--primary-green);
        }

        .filter-btn.active {
            background: rgba(0, 255, 0, 0.1);
            border-color: var(--primary-green);
            box-shadow: 0 8px 32px rgba(0, 255, 0, 0.3);
        }

        .filter-icon {
            font-size: 32px;
            margin-bottom: 12px;
            display: block;
        }

        .filter-label {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .filter-btn.active .filter-label {
            color: var(--primary-green);
        }

        /* Controls */
        .camera-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
        }

        .control-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 2px solid var(--border);
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            color: var(--text-primary);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            transform: scale(1.1);
            border-color: var(--primary-green);
            box-shadow: 0 10px 40px rgba(0, 255, 0, 0.3);
        }

        #captureBtn {
            width: 90px;
            height: 90px;
            background: var(--gradient-green);
            border: none;
            color: #000;
            font-size: 32px;
            box-shadow: 0 10px 40px rgba(0, 255, 0, 0.4);
        }

        #captureBtn:hover {
            box-shadow: 0 15px 60px rgba(0, 255, 0, 0.6);
        }

        /* GALLERY */
        .gallery-page {
            padding: 120px 5% 100px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 9 / 16;
            border-radius: 24px;
            overflow: hidden;
            background: var(--card-bg);
            border: 1px solid var(--border);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0, 255, 0, 0.3);
            border-color: var(--primary-green);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            padding: 24px;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            gap: 12px;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-btn {
            flex: 1;
            padding: 12px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid var(--primary-green);
            border-radius: 12px;
            color: var(--primary-green);
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .gallery-btn:hover {
            background: rgba(0, 255, 0, 0.3);
        }

        .gallery-empty {
            text-align: center;
            padding: 120px 20px;
        }

        .empty-icon {
            font-size: 80px;
            color: rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .empty-text {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 40px;
        }

        /* Flash Effect */
        #flashEffect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #fff;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
        }

        #flashEffect.active {
            animation: flash 0.5s ease-out;
        }

        @keyframes flash {
            0% { opacity: 0; }
            50% { opacity: 0.9; }
            100% { opacity: 0; }
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            font-size: 14px;
            border-top: 1px solid var(--border);
            margin-top: 100px;
        }

        .footer-highlight {
            color: var(--primary-green);
            font-weight: 700;
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav { padding: 0 20px; height: 70px; }
            .brand-icon { width: 40px; height: 40px; font-size: 20px; }
            .brand-title { font-size: 18px; }
            .nav-menu { gap: 6px; }
            .nav-link { padding: 10px 16px; font-size: 12px; }
            .features { grid-template-columns: repeat(2, 1fr); gap: 20px; }
            .filter-grid { grid-template-columns: repeat(4, 1fr); gap: 12px; }
            .gallery-grid { grid-template-columns: repeat(2, 1fr); gap: 20px; }
        }

        @media (max-width: 480px) {
            .hero { padding: 80px 20px 60px; }
            .camera-page, .gallery-page { padding: 100px 20px 80px; }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="grid-overlay"></div>
        <div class="floating-particles" id="particles"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-brand">
            <div class="brand-icon">
                <i class="fas fa-bolt"></i>
            </div>
            <div class="brand-text">
                <div class="brand-title">TECHFEST 2025</div>
                <div class="brand-subtitle">IEEE SRI LANKA</div>
            </div>
        </div>
        <div class="nav-menu">
            <a href="#" class="nav-link active" data-page="home">Home</a>
            <a href="#" class="nav-link" data-page="camera">Camera</a>
            <a href="#" class="nav-link" data-page="gallery">Gallery</a>
        </div>
    </nav>

    <!-- Flash Effect -->
    <div id="flashEffect"></div>

    <!-- HOME PAGE -->
    <div id="homePage" class="page active">
        <section class="hero">
            <div class="hero-3d-element" style="top: 20%; left: 10%;"></div>
            <div class="hero-3d-element" style="bottom: 20%; right: 10%; animation-delay: -4s;"></div>

            <h1 class="hero-title">IEEE TECHFEST 2025</h1>
            <p class="hero-subtitle">Sri Lanka's Premier Technology Festival</p>
            <p class="hero-tagline">
                Experience cutting-edge AR technology with professional filters<br>
                Capture, create, and share your innovation journey
            </p>

            <button class="cta-button" onclick="navigateToPage('camera')">
                <i class="fas fa-camera cta-icon"></i>
                Launch AR Camera
            </button>

            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="feature-title">Event Date</div>
                    <div class="feature-value">Dec 20, 2025</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="feature-title">Venue</div>
                    <div class="feature-value">Trace Expert City</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="feature-title">Expected Reach</div>
                    <div class="feature-value">1,000+</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-magic"></i>
                    </div>
                    <div class="feature-title">AR Filters</div>
                    <div class="feature-value">8 Exclusive</div>
                </div>
            </div>
        </section>

        <footer>
            Developed with precision by <span class="footer-highlight">Ceylon Labs</span> © 2025<br>
            Official AR Camera Platform for IEEE TechFest Sri Lanka
        </footer>
    </div>

    <!-- CAMERA PAGE -->
    <div id="cameraPage" class="page">
        <div class="camera-page">
            <div class="camera-wrapper">
                <div class="camera-header">
                    <h2 class="section-title">AR Camera Studio</h2>
                    <p class="section-subtitle">Professional filters for your TechFest moments</p>
                </div>

                <div class="camera-viewport">
                    <video id="webcam" style="display:none;" playsinline autoplay></video>
                    <canvas id="canvas"></canvas>

                    <!-- Professional IEEE TechFest Branded Frame -->
                    
                    <!-- Top Bar with Logos -->
                    <div style="position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 100%); padding: 20px 30px; display: flex; justify-content: space-around; align-items: center; z-index: 15; border-bottom: 3px solid #00ff00;">
                        <img src="assets/logos/IEEE.png" alt="IEEE" style="height: 65px; filter: drop-shadow(0 2px 10px rgba(0,255,0,0.5));">
                        <img src="assets/logos/slsac.png" alt="SLSAC" style="height: 60px; filter: drop-shadow(0 2px 10px rgba(0,255,0,0.5));">
                        <img src="assets/logos/techverse.png" alt="TechVerse" style="height: 65px; filter: drop-shadow(0 2px 10px rgba(0,255,0,0.5));">
                    </div>

                    <!-- Bottom Bar with Partner Logos and Text -->
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 100%); padding: 30px; z-index: 15; border-top: 3px solid #00ff00; border-bottom: 5px solid #000;">
                        <!-- TechFest Logo in Middle -->
                        <div style="text-align: center; margin-bottom: 20px;">
                            <img src="assets/logos/techfest.png" alt="TechFest 2025" style="height: 80px; filter: drop-shadow(0 4px 20px rgba(0,255,0,0.8));">
                        </div>
                        
                        <!-- Powered By Ceylon Labs -->
                        <div style="display: flex; justify-content: center; align-items: center; gap: 12px; margin-top: 15px;">
                            <span style="font-family: 'Inter', sans-serif; font-size: 18px; font-weight: 500; color: rgba(255,255,255,0.8); letter-spacing: 1px;">Powered by</span>
                            <img src="assets/logos/ceylon-labs.png" alt="Ceylon Labs" style="height: 45px; filter: drop-shadow(0 2px 10px rgba(255,255,255,0.4));">
                        </div>
                    </div>

                    <!-- Animated Green Corner Brackets -->
                    <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 12; pointer-events: none;">
                        <!-- Top Left -->
                        <path d="M 25 100 L 25 25 L 100 25" stroke="#00ff00" stroke-width="4" fill="none" stroke-linecap="round">
                            <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <!-- Top Right -->
                        <path d="M calc(100% - 100) 25 L calc(100% - 25) 25 L calc(100% - 25) 100" stroke="#00ff00" stroke-width="4" fill="none" stroke-linecap="round">
                            <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                        </path>
                        <!-- Bottom Left -->
                        <path d="M 25 calc(100% - 100) L 25 calc(100% - 25) L 100 calc(100% - 25)" stroke="#00ff00" stroke-width="4" fill="none" stroke-linecap="round">
                            <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" begin="1s" repeatCount="indefinite"/>
                        </path>
                        <!-- Bottom Right -->
                        <path d="M calc(100% - 100) calc(100% - 25) L calc(100% - 25) calc(100% - 25) L calc(100% - 25) calc(100% - 100)" stroke="#00ff00" stroke-width="4" fill="none" stroke-linecap="round">
                            <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" begin="1.5s" repeatCount="indefinite"/>
                        </path>
                    </svg>

                    <!-- Vertical Side Accents -->
                    <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); width: 4px; height: 150px; background: linear-gradient(to bottom, transparent, #00ff00, transparent); z-index: 12; animation: slideUpDown 3s ease-in-out infinite;"></div>
                    <div style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); width: 4px; height: 150px; background: linear-gradient(to bottom, transparent, #00ff00, transparent); z-index: 12; animation: slideUpDown 3s ease-in-out infinite; animation-delay: 1.5s;"></div>

                    <div class="scan-line"></div>
                    
                    <style>
                        @keyframes glow {
                            0%, 100% { text-shadow: 0 0 20px rgba(0,255,0,0.6), 0 4px 30px rgba(0,0,0,1); }
                            50% { text-shadow: 0 0 40px rgba(0,255,0,1), 0 4px 40px rgba(0,0,0,1); }
                        }
                        @keyframes slideUpDown {
                            0%, 100% { transform: translateY(-80%); }
                            50% { transform: translateY(-20%); }
                        }
                    </style>
                </div>

                <!-- Snapchat-Style Horizontal Scrolling Filters -->
                <div class="filter-section" style="overflow-x: auto; overflow-y: hidden; -webkit-overflow-scrolling: touch; scrollbar-width: none; padding: 20px 0;">
                    <style>
                        .filter-section::-webkit-scrollbar { display: none; }
                        .snapchat-filters {
                            display: flex;
                            gap: 15px;
                            padding: 0 20px;
                            min-width: min-content;
                        }
                        .snap-filter-card {
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            min-width: 80px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        }
                        .snap-filter-card:hover {
                            transform: translateY(-5px);
                        }
                        .snap-filter-icon {
                            width: 75px;
                            height: 75px;
                            border-radius: 20px;
                            background: rgba(255, 255, 255, 0.1);
                            backdrop-filter: blur(20px);
                            border: 2px solid rgba(255, 255, 255, 0.2);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            margin-bottom: 10px;
                            transition: all 0.3s ease;
                        }
                        .snap-filter-card.active .snap-filter-icon {
                            background: rgba(0, 255, 0, 0.25);
                            border-color: #00ff00;
                            box-shadow: 0 10px 30px rgba(0, 255, 0, 0.5);
                            transform: scale(1.1);
                        }
                        .snap-filter-card:hover .snap-filter-icon {
                            border-color: #00ff00;
                            box-shadow: 0 10px 30px rgba(0, 255, 0, 0.3);
                        }
                        .snap-filter-icon i {
                            font-size: 32px;
                            color: #fff;
                        }
                        .snap-filter-card.active .snap-filter-icon i {
                            color: #00ff00;
                        }
                        .snap-filter-name {
                            font-size: 13px;
                            font-weight: 600;
                            color: #fff;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                        }
                        .snap-filter-card.active .snap-filter-name {
                            color: #00ff00;
                        }
                    </style>
                    <div class="snapchat-filters">
                        <div class="snap-filter-card active" data-filter="original">
                            <div class="snap-filter-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <div class="snap-filter-name">Original</div>
                        </div>
                        <div class="snap-filter-card" data-filter="dogears">
                            <div class="snap-filter-icon">
                                <i class="fas fa-dog"></i>
                            </div>
                            <div class="snap-filter-name">Dog Ears</div>
                        </div>
                        <div class="snap-filter-card" data-filter="glasses">
                            <div class="snap-filter-icon">
                                <i class="fas fa-glasses"></i>
                            </div>
                            <div class="snap-filter-name">Glasses</div>
                        </div>
                        <div class="snap-filter-card" data-filter="crown">
                            <div class="snap-filter-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="snap-filter-name">Crown</div>
                        </div>
                        <div class="snap-filter-card" data-filter="hearts">
                            <div class="snap-filter-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="snap-filter-name">Hearts</div>
                        </div>
                        <div class="snap-filter-card" data-filter="sparkle">
                            <div class="snap-filter-icon">
                                <i class="fas fa-sparkles"></i>
                            </div>
                            <div class="snap-filter-name">Sparkle</div>
                        </div>
                        <div class="snap-filter-card" data-filter="techverse">
                            <div class="snap-filter-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div class="snap-filter-name">TechVerse</div>
                        </div>
                        <div class="snap-filter-card" data-filter="neon">
                            <div class="snap-filter-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="snap-filter-name">Neon</div>
                        </div>
                        <div class="snap-filter-card" data-filter="cyberpunk">
                            <div class="snap-filter-icon">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="snap-filter-name">Cyberpunk</div>
                        </div>
                        <div class="snap-filter-card" data-filter="vintage">
                            <div class="snap-filter-icon">
                                <i class="fas fa-film"></i>
                            </div>
                            <div class="snap-filter-name">Vintage</div>
                        </div>
                    </div>
                </div>

                <div class="camera-controls">
                    <button class="control-btn" id="switchBtn" title="Switch Camera">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="control-btn" id="captureBtn" title="Capture Photo">
                        <i class="fas fa-camera"></i>
                    </button>
                    <button class="control-btn" onclick="navigateToPage('gallery')" title="View Gallery">
                        <i class="fas fa-images"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- GALLERY PAGE -->
    <div id="galleryPage" class="page">
        <div class="gallery-page">
            <div class="camera-header">
                <h2 class="section-title">Your Gallery</h2>
                <p class="section-subtitle">All your TechFest memories in one place</p>
            </div>

            <div id="galleryGrid" class="gallery-grid"></div>

            <div id="galleryEmpty" class="gallery-empty">
                <div class="empty-icon">
                    <i class="fas fa-camera-retro"></i>
                </div>
                <div class="empty-text">No photos captured yet</div>
                <button class="cta-button" onclick="navigateToPage('camera')">
                    <i class="fas fa-camera cta-icon"></i>
                    Take Your First Photo
                </button>
            </div>

            <footer>
                Photos are stored locally on your device<br>
                Clearing browser data will remove all saved photos
            </footer>
        </div>
    </div>

    <script>
        // Create floating particles
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.animationDuration = (15 + Math.random() * 10) + 's';
            particlesContainer.appendChild(particle);
        }

        // State
        let currentPage = 'home';
        let currentFilter = 'original';
        let facingMode = 'user';
        let stream = null;
        let animationId = null;
        let capturedPhotos = [];
        let faceDetectionReady = false;
        let detectedFaces = [];

        const video = document.getElementById('webcam');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d', { alpha: false, desynchronized: true, willReadFrequently: true });

        canvas.width = 1080;
        canvas.height = 1920;

        // Initialize Face Detection
        async function loadFaceDetection() {
            try {
                const MODEL_URL = 'https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/';
                await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
                await faceapi.nets.faceLandmark68TinyNet.loadFromUri(MODEL_URL);
                faceDetectionReady = true;
                console.log('✓ Face detection ready');
            } catch (error) {
                console.error('Face detection initialization failed:', error);
                faceDetectionReady = false;
            }
        }

        // Detect faces periodically (not every frame to avoid flickering)
        let lastFaceDetectionTime = 0;
        async function detectFaces() {
            const now = Date.now();
            if (!faceDetectionReady || now - lastFaceDetectionTime < 200) return; // Detect every 200ms
            
            lastFaceDetectionTime = now;
            try {
                const detections = await faceapi
                    .detectAllFaces(video, new faceapi.TinyFaceDetectorOptions({ inputSize: 224, scoreThreshold: 0.5 }))
                    .withFaceLandmarks(true);
                
                if (detections && detections.length > 0) {
                    // Scale detections to canvas size
                    detectedFaces = detections.map(d => {
                        const scaleX = canvas.width / video.videoWidth;
                        const scaleY = canvas.height / video.videoHeight;
                        
                        return {
                            box: {
                                x: d.detection.box.x * scaleX,
                                y: d.detection.box.y * scaleY,
                                width: d.detection.box.width * scaleX,
                                height: d.detection.box.height * scaleY
                            },
                            landmarks: {
                                leftEye: { x: d.landmarks.getLeftEye()[0].x * scaleX, y: d.landmarks.getLeftEye()[0].y * scaleY },
                                rightEye: { x: d.landmarks.getRightEye()[0].x * scaleX, y: d.landmarks.getRightEye()[0].y * scaleY },
                                nose: { x: d.landmarks.getNose()[0].x * scaleX, y: d.landmarks.getNose()[0].y * scaleY },
                                mouth: d.landmarks.getMouth().map(p => ({ x: p.x * scaleX, y: p.y * scaleY })),
                                jawline: d.landmarks.getJawOutline().map(p => ({ x: p.x * scaleX, y: p.y * scaleY }))
                            }
                        };
                    });
                } else {
                    detectedFaces = [];
                }
            } catch (error) {
                console.error('Face detection error:', error);
            }
        }

        // Navigation
        function navigateToPage(pageName) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageName + 'Page').classList.add('active');

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === pageName) link.classList.add('active');
            });

            currentPage = pageName;

            if (pageName === 'camera') initCamera();
            else if (pageName === 'gallery') loadGallery();
            else stopCamera();

            window.scrollTo(0, 0);
        }

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToPage(link.dataset.page);
            });
        });

        // Camera
        async function initCamera() {
            if (stream) return;
            try {
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode, width: { ideal: 1080 }, height: { ideal: 1920 }, aspectRatio: { ideal: 9/16 } },
                    audio: false
                });
                video.srcObject = stream;
                await video.play();
                startRendering();
            } catch (error) {
                console.error('Camera error:', error);
                alert('Unable to access camera. Please allow permissions.');
            }
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            detectedFaces = [];
        }

        function startRendering() {
            let lastFrameTime = 0;
            const fps = 30; // Limit to 30 FPS to prevent flickering
            const frameInterval = 1000 / fps;
            
            function render(currentTime) {
                animationId = requestAnimationFrame(render);
                
                if (currentTime - lastFrameTime < frameInterval) return;
                lastFrameTime = currentTime;
                
                if (video.readyState === video.HAVE_ENOUGH_DATA) {
                    // Clear canvas first to prevent flickering
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw mirrored video
                    ctx.save();
                    ctx.scale(-1, 1);
                    ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
                    ctx.restore();
                    
                    // Apply filter if not original
                    if (currentFilter !== 'original' && !['dogears', 'glasses', 'crown', 'hearts', 'sparkle'].includes(currentFilter)) {
                        applyFilter(currentFilter);
                    }
                    
                    // Draw AR face filters
                    if (['dogears', 'glasses', 'crown', 'hearts', 'sparkle'].includes(currentFilter)) {
                        drawFaceARFilter(currentFilter);
                    }
                    
                    // Detect faces in background
                    detectFaces();
                }
            }
            render(0);
        }

        // Professional Trending Filters (Instagram/Snapchat Style)
        function applyFilter(filterName) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            switch(filterName) {
                case 'neon':
                    // Enhanced Neon Glow - Vibrant cyan/magenta
                    for (let i = 0; i < data.length; i += 4) {
                        const brightness = (data[i] + data[i+1] + data[i+2]) / 3;
                        data[i] = Math.min(255, data[i] * 1.2 + 30); // Enhanced reds
                        data[i+1] = Math.min(255, data[i+1] * 1.4 + 40); // Boosted greens
                        data[i+2] = Math.min(255, data[i+2] * 1.3 + 60); // Vibrant blues
                        // Add glow effect
                        if (brightness > 180) {
                            data[i] = Math.min(255, data[i] * 1.3);
                            data[i+1] = Math.min(255, data[i+1] * 1.3);
                            data[i+2] = Math.min(255, data[i+2] * 1.3);
                        }
                    }
                    break;
                    
                case 'matrix':
                    // Digital Rain Matrix Effect - Enhanced green tones
                    for (let i = 0; i < data.length; i += 4) {
                        const luminance = 0.299 * data[i] + 0.587 * data[i+1] + 0.114 * data[i+2];
                        data[i] = 0;
                        data[i+1] = Math.min(255, luminance * 1.8 + 20); // Intense green
                        data[i+2] = Math.min(100, luminance * 0.3); // Slight blue tint
                        // Add contrast boost
                        if (data[i+1] > 128) data[i+1] = Math.min(255, data[i+1] * 1.2);
                    }
                    break;
                    
                case 'cyberpunk':
                    // Blade Runner Style - Pink/Cyan aesthetic
                    for (let i = 0; i < data.length; i += 4) {
                        const avg = (data[i] + data[i+1] + data[i+2]) / 3;
                        if (avg > 120) {
                            // Highlights: Cyan tones
                            data[i] = Math.min(255, data[i] * 0.7 + 20);
                            data[i+1] = Math.min(255, data[i+1] * 1.2 + 40);
                            data[i+2] = Math.min(255, data[i+2] * 1.5 + 60);
                        } else {
                            // Shadows: Magenta/purple tones
                            data[i] = Math.min(255, data[i] * 1.3 + 30);
                            data[i+1] = Math.min(255, data[i+1] * 0.6);
                            data[i+2] = Math.min(255, data[i+2] * 1.2 + 40);
                        }
                        // Increase saturation
                        const factor = 1.3;
                        data[i] = Math.min(255, avg + (data[i] - avg) * factor);
                        data[i+1] = Math.min(255, avg + (data[i+1] - avg) * factor);
                        data[i+2] = Math.min(255, avg + (data[i+2] - avg) * factor);
                    }
                    break;
                    
                case 'glitch':
                    // Digital Glitch with RGB Split
                    const glitchIntensity = Math.random();
                    if (glitchIntensity > 0.85) {
                        const shift = Math.floor(Math.random() * 50);
                        // RGB channel separation
                        for (let i = 0; i < data.length - shift * 4; i += 4) {
                            data[i] = data[i + shift * 4]; // Red shift
                        }
                        for (let i = shift * 4; i < data.length; i += 4) {
                            data[i+2] = data[i - shift * 4 + 2]; // Blue shift opposite
                        }
                    }
                    // Scanlines
                    for (let y = 0; y < canvas.height; y += 4) {
                        for (let x = 0; x < canvas.width; x++) {
                            const i = (y * canvas.width + x) * 4;
                            data[i] *= 0.85;
                            data[i+1] *= 0.85;
                            data[i+2] *= 0.85;
                        }
                    }
                    break;
                    
                case 'vintage':
                    // Warm Vintage Film Look (Instagram Clarendon style)
                    for (let i = 0; i < data.length; i += 4) {
                        // Sepia tone base
                        const r = data[i], g = data[i+1], b = data[i+2];
                        data[i] = Math.min(255, r * 0.93 + g * 0.769 + b * 0.189 + 20);
                        data[i+1] = Math.min(255, r * 0.749 + g * 0.686 + b * 0.168 + 10);
                        data[i+2] = Math.min(255, r * 0.472 + g * 0.534 + b * 0.331);
                        
                        // Add warm glow and vignette
                        const centerX = canvas.width / 2;
                        const centerY = canvas.height / 2;
                        const x = (i / 4) % canvas.width;
                        const y = Math.floor((i / 4) / canvas.width);
                        const distance = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
                        const maxDistance = Math.sqrt(centerX ** 2 + centerY ** 2);
                        const vignette = 1 - (distance / maxDistance) * 0.6;
                        
                        data[i] *= vignette;
                        data[i+1] *= vignette;
                        data[i+2] *= vignette * 0.9;
                    }
                    break;
                    
                case 'bw':
                    // High Contrast B&W (Instagram Inkwell style)
                    for (let i = 0; i < data.length; i += 4) {
                        const gray = data[i] * 0.299 + data[i+1] * 0.587 + data[i+2] * 0.114;
                        // Increase contrast
                        const contrast = 1.3;
                        const factor = (259 * (contrast + 255)) / (255 * (259 - contrast));
                        const adjusted = factor * (gray - 128) + 128;
                        const final = Math.max(0, Math.min(255, adjusted));
                        data[i] = data[i+1] = data[i+2] = final;
                    }
                    break;
                    
                case 'techverse':
                    // TechFest Signature Filter - Green/Tech aesthetic
                    for (let i = 0; i < data.length; i += 4) {
                        const brightness = (data[i] + data[i+1] + data[i+2]) / 3;
                        // Enhance greens, reduce reds
                        data[i] = Math.min(255, data[i] * 0.9 + 10);
                        data[i+1] = Math.min(255, data[i+1] * 1.5 + 30); // Boost green
                        data[i+2] = Math.min(255, data[i+2] * 0.85 + 15);
                        
                        // Add tech glow to bright areas
                        if (brightness > 150) {
                            data[i+1] = Math.min(255, data[i+1] * 1.2 + 20);
                        }
                    }
                    break;
            }

            ctx.putImageData(imageData, 0, 0);
        }

        // AR Elements
        function drawARElements() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 3;
            const capSize = 350;

            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, capSize * 0.5);
            gradient.addColorStop(0, '#00ff00');
            gradient.addColorStop(0.6, '#00cc00');
            gradient.addColorStop(1, '#008800');

            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, capSize * 0.5, capSize * 0.35, 0, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#005500';
            ctx.beginPath();
            ctx.ellipse(centerX, centerY + capSize * 0.3, capSize * 0.65, capSize * 0.12, 0, 0, Math.PI);
            ctx.fill();

            ctx.fillStyle = '#000';
            ctx.font = `bold ${capSize * 0.13}px Inter`;
            ctx.textAlign = 'center';
            ctx.fillText('TECHFEST', centerX, centerY);

            // Bottom branding
            const bottomY = canvas.height - 300;
            const grad2 = ctx.createLinearGradient(0, bottomY, 0, canvas.height);
            grad2.addColorStop(0, 'rgba(0,0,0,0)');
            grad2.addColorStop(1, 'rgba(0,0,0,0.85)');
            ctx.fillStyle = grad2;
            ctx.fillRect(0, bottomY, canvas.width, canvas.height - bottomY);

            ctx.fillStyle = '#00ff00';
            ctx.font = 'bold 70px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('IEEE TECHFEST 2025', canvas.width / 2, canvas.height - 170);

            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.font = '32px Inter';
            ctx.fillText('Powering Tomorrow\'s Innovation', canvas.width / 2, canvas.height - 100);
        }

        // Snapchat-Style Filter Selection
        document.querySelectorAll('.snap-filter-card').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.snap-filter-card').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
            });
        });

        // Capture Photo with Branding Overlay
        document.getElementById('captureBtn').addEventListener('click', async () => {
            const flash = document.getElementById('flashEffect');
            flash.classList.add('active');
            setTimeout(() => flash.classList.remove('active'), 500);

            // Create a temporary canvas for adding logos
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            const tempCtx = tempCanvas.getContext('2d');
            
            // Draw the main canvas content
            tempCtx.drawImage(canvas, 0, 0);
            
            // Add professional branding overlay
            // Top Bar with Logos
            const topBarHeight = 140;
            const topGradient = tempCtx.createLinearGradient(0, 0, 0, topBarHeight);
            topGradient.addColorStop(0, 'rgba(0,0,0,0.95)');
            topGradient.addColorStop(1, 'rgba(0,0,0,0.75)');
            tempCtx.fillStyle = topGradient;
            tempCtx.fillRect(0, 0, tempCanvas.width, topBarHeight);
            
            // Green accent line top
            tempCtx.fillStyle = '#00ff00';
            tempCtx.fillRect(0, topBarHeight - 6, tempCanvas.width, 6);
            
            // Bottom Bar with Logos
            const bottomBarHeight = 200;
            const bottomY = tempCanvas.height - bottomBarHeight;
            const bottomGradient = tempCtx.createLinearGradient(0, bottomY, 0, tempCanvas.height);
            bottomGradient.addColorStop(0, 'rgba(0,0,0,0.75)');
            bottomGradient.addColorStop(1, 'rgba(0,0,0,0.95)');
            tempCtx.fillStyle = bottomGradient;
            tempCtx.fillRect(0, bottomY, tempCanvas.width, bottomBarHeight);
            
            // Green accent line bottom
            tempCtx.fillStyle = '#00ff00';
            tempCtx.fillRect(0, bottomY, tempCanvas.width, 6);
            
            // Load and draw logos
            try {
                // IEEE Logo (top left)
                const ieeeImg = await loadImage('assets/logos/IEEE.png');
                tempCtx.drawImage(ieeeImg, 40, 30, 180, 80);
                
                // SLSAC Logo (top center)
                const slsacImg = await loadImage('assets/logos/slsac.png');
                tempCtx.drawImage(slsacImg, (tempCanvas.width - 160) / 2, 35, 160, 70);
                
                // TechVerse Logo (top right)
                const techverseImg = await loadImage('assets/logos/techverse.png');
                tempCtx.drawImage(techverseImg, tempCanvas.width - 220, 30, 180, 80);
                
                // TechFest Logo (bottom center)
                const techfestImg = await loadImage('assets/logos/techfest.png');
                tempCtx.drawImage(techfestImg, (tempCanvas.width - 240) / 2, bottomY + 30, 240, 90);
                
                // Ceylon Labs Logo (bottom)
                const ceylonImg = await loadImage('assets/logos/ceylon-labs.png');
                tempCtx.drawImage(ceylonImg, (tempCanvas.width - 180) / 2, bottomY + 130, 180, 55);
                
                // Add text
                tempCtx.fillStyle = 'rgba(255,255,255,0.7)';
                tempCtx.font = '32px Inter, sans-serif';
                tempCtx.textAlign = 'center';
                tempCtx.fillText('Powered by', tempCanvas.width / 2, bottomY + 125);
                
            } catch (error) {
                console.error('Logo loading error:', error);
            }
            
            // Add timestamp watermark
            tempCtx.fillStyle = 'rgba(0,255,0,0.6)';
            tempCtx.font = 'bold 28px Inter, sans-serif';
            tempCtx.textAlign = 'right';
            tempCtx.fillText(new Date().toLocaleDateString(), tempCanvas.width - 40, bottomY - 20);
            
            // Convert to blob and save
            tempCanvas.toBlob((blob) => {
                const reader = new FileReader();
                reader.onloadend = () => {
                    const photoData = {
                        id: Date.now(),
                        data: reader.result,
                        filter: currentFilter,
                        timestamp: new Date().toLocaleString()
                    };
                    capturedPhotos.push(photoData);
                    localStorage.setItem('techfest_photos', JSON.stringify(capturedPhotos));
                    alert('✓ Photo captured with IEEE TechFest branding!');
                };
                reader.readAsDataURL(blob);
            }, 'image/jpeg', 0.95);
        });
        
        // Helper function to load images
        function loadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = src;
            });
        }

        // Switch camera
        document.getElementById('switchBtn').addEventListener('click', async () => {
            facingMode = facingMode === 'user' ? 'environment' : 'user';
            stopCamera();
            await initCamera();
        });

        // Gallery
        function loadGallery() {
            const stored = localStorage.getItem('techfest_photos');
            capturedPhotos = stored ? JSON.parse(stored) : [];

            const grid = document.getElementById('galleryGrid');
            const empty = document.getElementById('galleryEmpty');

            if (capturedPhotos.length === 0) {
                grid.style.display = 'none';
                empty.style.display = 'block';
            } else {
                grid.style.display = 'grid';
                empty.style.display = 'none';
                grid.innerHTML = '';

                capturedPhotos.slice().reverse().forEach(photo => {
                    const item = document.createElement('div');
                    item.className = 'gallery-item';
                    item.innerHTML = `
                        <img src="${photo.data}" alt="TechFest Photo">
                        <div class="gallery-overlay">
                            <button class="gallery-btn" onclick="downloadPhoto(${photo.id})">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="gallery-btn" onclick="deletePhoto(${photo.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    `;
                    grid.appendChild(item);
                });
            }
        }

        window.downloadPhoto = function(id) {
            const photo = capturedPhotos.find(p => p.id === id);
            if (photo) {
                const a = document.createElement('a');
                a.href = photo.data;
                a.download = `TechFest-2025-${id}.jpg`;
                a.click();
            }
        };

        window.deletePhoto = function(id) {
            if (confirm('Delete this photo?')) {
                capturedPhotos = capturedPhotos.filter(p => p.id !== id);
                localStorage.setItem('techfest_photos', JSON.stringify(capturedPhotos));
                loadGallery();
            }
        };

        // Init
        const stored = localStorage.getItem('techfest_photos');
        if (stored) capturedPhotos = JSON.parse(stored);

        if ('wakeLock' in navigator) {
            navigator.wakeLock.request('screen').catch(() => {});
        }
    </script>
</body>
</html>